# [AI GENERATED] LLM: GitHub Copilot, Mode: Chat, Date: 2025-12-15
# Default values for school-microservice Helm chart

# Namespace for deployment
namespace: school-demo

# School microservice configuration
schoolService:
  name: school-service
  replicaCount: 2
  
  image:
    repository: school-microservice
    tag: "1.0.0"
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 8080
    targetPort: 8080
  
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi
  
  # Health check configuration
  livenessProbe:
    httpGet:
      path: /health
      port: 8080
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  
  readinessProbe:
    httpGet:
      path: /health
      port: 8080
    initialDelaySeconds: 15
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3
  
  # Environment variables for the application
  env:
    serverPort: "8080"
    couchbaseConnectionString: "couchbase://couchbase-service"
    couchbaseBucket: "school"

# Couchbase configuration
couchbase:
  enabled: true
  name: couchbase
  
  image:
    repository: couchbase/server
    tag: "7.2.4"
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    ports:
      console: 8091
      api: 8092
      query: 8093
      search: 8094
      analytics: 8095
      eventing: 8096
      client: 11210
  
  # Couchbase credentials (use secrets in production)
  auth:
    username: "Administrator"
    password: "password"
  
  # Bucket configuration
  bucket:
    name: "school"
    ramQuotaMB: 256
  
  # Persistent volume configuration
  persistence:
    enabled: true
    storageClass: ""  # Use default storage class
    size: 5Gi
  
  resources:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi
  
  # Liveness and readiness probes
  livenessProbe:
    httpGet:
      path: /ui/index.html
      port: 8091
    initialDelaySeconds: 60
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  
  readinessProbe:
    httpGet:
      path: /ui/index.html
      port: 8091
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3

# Ingress configuration (optional)
ingress:
  enabled: false
  className: nginx
  annotations: {}
    # cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts:
    - host: school-api.example.com
      paths:
        - path: /
          pathType: Prefix
  tls: []
    # - secretName: school-api-tls
    #   hosts:
    #     - school-api.example.com

# Service account
serviceAccount:
  create: true
  annotations: {}
  name: ""

# Pod security context
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

# Security context
securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: false
  capabilities:
    drop:
      - ALL

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}
